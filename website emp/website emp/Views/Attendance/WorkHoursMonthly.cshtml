@model website_emp.Models.Employe
@{
    ViewBag.Title = "WorkHoursMonthly";
}

<div class="mt-3">
    <ul class="nav nav-tabs">
        <li class="nav-item ml-3">
            <a class="nav-link" href="@Url.Action("WorkHours", "Attendance")">Daily Working Hours</a>
        </li>
        <li class="nav-item ml-3">
            <a class="nav-link active" href="@Url.Action("WorkHoursMonthly", "Attendance")">Monthly Working Hours</a>
        </li>


    </ul>
</div>
<div class="Big-Box">
    <form action="@Url.Action("WorkHoursMonthly")" method="get">
    <div class="row m-3">
        <div class="col-sm-12 col-lg-3">
            <p class="mb-0">Select Month*</p>
            <select name="Month" class="form-control">
                <script>
                    var months = ['January', 'Febrarury', 'March', 'April', 'May', 'June', 'July', 'Agust', 'September', 'Octuber', 'November', 'December'];
                    let selected = parseInt('@ViewData["Month"]')-1;
                    for (var i in months) {
                        if (i == selected) {
                            document.write(`<option selected value='${i}'>${months[i]}</option>`);
                        } else {
                            document.write(`<option value='${i}'>${months[i]}</option>`);
                        }
                        
                    }
                </script>
            </select>
                @*<option>January</option>
                <option>Febrarury</option>
                <option>March</option>
                <option>April</option>
                <option>May</option>
                <option>June</option>
                <option>July</option>
                <option>Agust</option>
                <option>September</option>
                <option>Octuber</option>
                <option>November</option>
                <option>December</option>*@

            
        </div>
        <div class="col-sm-12 col-lg-3">
            <p class="mb-0">Select Year*</p>
            <select name="Year" class="form-control">
                <script>
                     selected = parseInt('@ViewData["Year"]');
                    for (let i = 0 ; i<15;i++) {
                        if ((i+2014) == selected) {
                            document.write(`<option selected value='${i+2014}'>${2014+i}</option>`);
                        } else {
                            document.write(`<option value='${i+2014}'>${i+2014}</option>`);
                        }

                    }
                </script>
             </select>
        </div>
        <div class="col-sm-12 col-lg-3">
            <p class="mb-0">Employee ID*</p>
            @Html.DropDownList("EmployeId", ViewData["EmployeId"] as SelectList, new { @class = "form-control" })
        </div>
        <div class="col-sm-12 col-lg-3 mt-4">
            <input type="submit" class="form-control bg-primary text-white" value="Submit" />
        </div>
    </div>
    </form>
    <div class="Custom-Table-box">
        <table class="table table-striped Custom-Table-Width">
            <thead class="">
                <tr class="">
                    <th class="Custom-Table-Heading">#</th>
                    <th class="Custom-Table-Heading">Date</th>
                    <th class="Custom-Table-Heading">Employee Name</th>
                    <th class="Custom-Table-Heading">Department</th>
                    <th class="Custom-Table-Heading">In Time</th>
                    <th class="Custom-Table-Heading">Out Time</th>
                    <th class="Custom-Table-Heading">Total Hours</th>
                </tr>
            </thead>
            <tbody>
                @if (ViewBag.message != null)
                {
                    <tr>
                        <td>@ViewBag.message</td>
                    </tr>
                    ViewBag.message = null;
                }
                else
                {
                    int count = 0;
                    foreach (var item in Model.attendance)
                    {
                        <tr>
                            <td>@count</td>
                            <td>@item.ForDay.Value.ToShortDateString()</td>
                            <td>@Model.FirstName</td>
                            <td>@Model.department.DepartmentName</td>
                           @if (item.Status == "Leave")
                           {
                               <td colspan="3">Leave</td>}
                           else if (item.Status == "Absent")
                           {
                            <td colspan="3">Absent</td>
                           }
                           else {
                            <td> @item.InTime.Value </td>
                            <td> @item.OutTime.Value </td>
                            <td>@(item.OutTime.Value - item.InTime.Value) Hours</td>
                           }

                        </tr>
                    }
                }
                
            </tbody>
        </table>

    </div>
    <div class="row mt-3">
        <div class="col-sm-12 col-lg-9 d-flex text-justify justify-content-center justify-content-lg-start">
            <p class="mt-3 ml-3">Showing 1 of 10 Pages</p>
        </div>
        <div class="col-sm-12 col-lg-3 d-flex justify-content-center justify-content-lg-end">
            <ul class="pagination mr-3">
                <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                <li class="page-item"><a class="page-link" href="#">1</a></li>
                <li class="page-item active"><a class="page-link" href="#">2</a></li>
                <li class="page-item"><a class="page-link" href="#">3</a></li>
                <li class="page-item"><a class="page-link" href="#">Next</a></li>
            </ul>
        </div>
    </div>
</div>

