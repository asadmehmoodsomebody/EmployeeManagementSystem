@model website_emp.Models.ViewModels.MonthlyAttendanceViewModel
@{
    ViewBag.Title = "MonthlyAttendance";
    int rowcount = 1 + ((Model.attendence.PageNumber - 1) * 10);
}
<link href="~/CustomCSS/Attendance Module Css/MonthlyAttendance.css" rel="stylesheet" />
<input type="hidden" id="GetActiveTab" value="#MonthlyAttendance" />
<div class="Big-Box">
    <div class="mt-3">
        <ul class="nav nav-tabs">
            <li class="nav-item ml-3">
                <a class="nav-link" href="@Url.Action("DailyAttendance", "Attendance")">Daily Attendance</a>
            </li>
            <li class="nav-item ml-3">
                <a class="nav-link active" href="@Url.Action("MonthlyAttendance", "Attendance")">Monthly Attendance</a>
            </li>


        </ul>
    </div>

    <div class="row bg-primary no-gutters m-0 text-white">
        <div class="col-12 m-0" style="height: 40px;">
            <span class="spanicon font-weight-bolder">
                <i class="fas fa-calculator ml-3  mt-2">    &nbsp;Monthly Attendance</i>
            </span>
        </div>
    </div>
    <div class="bg-white">
        <form action="@Url.Action("MonthlyAttendance","Attendance")">
            <div class="row m-3">
                <div class="col-sm-12 col-md-6 col-xl-3">
                    <P class="font-weight-bold mb-0 text-center">Employee</P>
                    @Html.DropDownList("employeid", ViewBag.employes as SelectList, new { @class = "form-control shadow border-0" })
                </div>
                <div class="col-sm-12 col-md-6 col-xl-3">
                    <P class="font-weight-bold mb-0 text-center">From Date</P>
                    <input type="date" value="@ViewData["starttime"]" name="starttime" class="form-control shadow border-0">
                </div>
                <div class="col-sm-12 col-md-6 col-xl-3">
                    <P class="font-weight-bold mb-0 text-center">To Date</P>
                    <input type="date" value="@ViewData["endtime"]" name="endtime" class="form-control shadow border-0">
                </div>
                <div class="col-sm-12  col-md-6 col-xl-3">
                    <button type="submit" class="bg-info text-white border-0 shadow form-control btn-filter mt-4">Filter</button>
                </div>
            </div>
        </form>
        <div class="tbl-div mt-3 overflow-auto">
            <table class="table table-striped table-bordered Tbl-Monthly">
                <tr>
                    <th>S/L</th>
                    <th>Date</th>
                    <th>Employee Name</th>
                    <th>In Time</th>
                    <th>Out Time</th>
                    <th>Working Time</th>
                    <th>Status</th>
                </tr>
                @foreach (var item in Model.attendence)
                {
                    <tr>
                        <td>1</td>
                        <td>@item.ForDay.Value.ToShortDateString()</td>
                        <td>@Model.employe.FirstName</td>
                        <td>@Model.employe.shift.ShiftStartTime.Value.ToShortTimeString()</td>
                        <td>@Model.employe.shift.ShiftEndTime.Value.ToShortTimeString()</td>
                        <td>7 hours</td>
                        @if (item.Status == "Leave")
                        {
                            <td style="background:yellow">@item.Status</td>
                        }
                        else if (item.Status == "Present")
                        {
                            <td style="background:green;">@item.Status</td>}
                        else
                        {
                            <td style="background:red;">@item.Status</td>
                        }

                    </tr>

                }
                @*<script>
                        for(let i = 1; i <=5; i++)
                        {
                            document.write("<tr>");

                            document.write("<td>" + i + "</td>");
                            document.write("<td>" + "02-10-2019" + "</td>");
                            document.write("<td>" + "Ismail" + "</td>");
                            document.write("<td>" + "2:30" + "</td>");
                            document.write("<td>" + "5:30" + "</td>");
                            document.write("<td>" + "5 hours" + "</td>");
                            document.write("<td>" + "No" + "</td>");

                            document.write("<td>" + "<span class='bg-success'>Active</span>" + "</td>");



                            document.write("</tr>");
                        }
                </script>*@
            </table>
            
        </div>
    </div>
    <div class="row no-gutters w-100">
        <div class="col-12 col-md-6 d-flex align-items-center justify-content-center justify-content-md-start pl-0 pl-md-2">
            <p class="text-justify">
                Page <span id="start-number">@Model.attendence.PageNumber</span>&nbsp;of <span id="total-pages">@Model.attendence.TotalPages</span>
            </p>
        </div>
        <div class="col-12 col-md-6 d-flex justify-content-center justify-content-md-end align-items-center pr-0 pr-md-2">
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    @if (!Model.attendence.HasPrevious)
                    {
                        <li class="page-item disabled"><a class="page-link disabled" href="#">Previous</a></li>
                    }
                    else
                    {
                        <li class="page-item "><a class="page-link" href="#">Previous</a></li>
                    }
                    @{
                        int i = 1;
                        if (Model.attendence.PageNumber - 2 > 1)
                        {
                            i = Model.attendence.PageNumber - 2;
                        }
                        for (; i <= (Model.attendence.PageNumber + 2) && i <= Model.attendence.TotalPages; i++)
                        {
                            <li class="page-item"><a class="page-link" href="#">@i</a></li>
                        }
                    }

                    @*<li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>*@
                    @if (!Model.attendence.HasNext)
                    {
                        <li class="page-item disabled"><a class="page-link disabled" href="#">Next</a></li>
                    }
                    else
                    {
                        <li class="page-item "><a class="page-link" href="#">Next</a></li>
                    }
                </ul>
            </nav>
        </div>
    </div>

</div>